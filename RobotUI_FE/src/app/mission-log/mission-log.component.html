<div class=" w-full flex flex-col pr-10 pt-10 pl-10 items-center justify-center gap-10">
  <div class="flex w-full items-center justify-between">
    <!-- Title -->
    <span class="flex flex-col items-start justify-center">
      <p class="text-[38px] font-bold">Mission Log</p>
      <p class="text-[16px] font-medium text-[#7B7B7B] flex items-center justify-center gap-2">
        View the Mission Log
        <svg
          width="20"
          height="20"
          viewBox="0 0 25 25"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clip-path="url(#clip0_513_29001)">
            <path
              d="M12.4987 2.08301C6.75495 2.08301 2.08203 6.75592 2.08203 12.4997C2.08203 18.2434 6.75495 22.9163 12.4987 22.9163C18.2424 22.9163 22.9154 18.2434 22.9154 12.4997C22.9154 6.75592 18.2424 2.08301 12.4987 2.08301ZM13.5404 17.708H11.457V11.458H13.5404V17.708ZM13.5404 9.37467H11.457V7.29134H13.5404V9.37467Z"
              fill="black"
            />
          </g>
          <defs>
            <clipPath id="clip0_513_29001">
              <rect width="25" height="25" fill="white" />
            </clipPath>
          </defs>
        </svg>
      </p>
    </span>
    <!-- Button -->
    <span class="flex items-center justify-between gap-10">
      <span
        class="flex items-center justify-center h-12 rounded-full shadow-[0_0_10px_#00000030]"
      >
        <span
          class="flex items-center justify-center bg-[#D30000] h-full px-5 rounded-ss-full rounded-es-full"
        >
          <p class="text-white font-semibold">Search</p>
        </span>
        <input
          type="text"
          placeholder="Search"
          class="flex font-normal border-none outline-none h-full w-[250px] border-2 px-3"
        />
        <span
          class="flex items-center justify-center bg-[#D30000] h-full px-6 rounded-ee-full rounded-se-full"
        >
          <svg
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M16.6937 14.7322H15.6255L15.2244 14.3973C16.4934 12.8573 17.2949 10.915 17.2949 8.70538C17.2948 3.88379 13.4214 0 8.6142 0C3.8728 0 0 3.88379 0 8.70538C0 13.527 3.8728 17.4107 8.68073 17.4107C10.8176 17.4107 12.8208 16.6071 14.3564 15.335L14.7569 15.6699V16.7411L21.4343 23.4375L23.4375 21.4286L16.6937 14.7322ZM8.68073 14.7322C5.34198 14.7322 2.67102 12.0535 2.67102 8.70538C2.67102 5.35712 5.34198 2.67865 8.68073 2.67865C12.0193 2.67865 14.6904 5.35712 14.6904 8.70538C14.6904 12.0535 12.0193 14.7322 8.68073 14.7322Z"
              fill="white"
            />
          </svg>
        </span>
      </span>
    </span>
  </div>
  <!-- Table -->
  <div class="w-full flex items-center justify-center flex-col gap-2">
    <!-- Table Title-->
    <span class="w-full py-6 text-white font-semibold rounded-[6px] bg-black flex items-center justify-between px-20 pr-[calc(5rem+10px)]">
      <span class="flex w-[30%] items-center justify-between pr-[1%]">
        <p class="text-white text-[14px] font-semibold capitalize w-full flex items-center justify-start">Mission</p>
        <p class="text-white text-[14px] font-semibold capitalize w-full flex items-center justify-center">State</p>
      </span>
      <span class="flex items-center justify-between gap-20 w-[80%] ">
        <span class="w-full flex items-center justify-around relative">
          <p class="text-white text-[14px] font-semibold capitalize w-full flex items-center justify-start">Message</p>
          <p class="text-white text-[14px] font-semibold capitalize w-full flex items-center justify-start">Start time</p>
        </span>
        <span class="w-[60%] flex items-center justify-between">
          <p class="text-white text-[14px] font-semibold capitalize w-full flex items-center justify-start">Ran for</p>
          <p class="text-white text-[14px] font-semibold capitalize w-full flex items-center justify-start">Started by</p>
        </span>
      </span>
    </span>

  <!-- Table Rows -->
  <span class="flex twoColors h-[400px] flex-col w-full items-start justify-start gap-[5px] overflow-scroll MinimalScrollCSS scroll-smooth scrollCSS pb-3 ">
   @for (logData of missionLogData; track logData) {
    <span (click)="viewLogs(logData._id)" class="w-full cursor-pointer py-6 text-black font-semibold rounded-[6px] twoColors flex items-center justify-between px-20">
      <span class="flex w-[30%] items-center justify-between pr-[1%]">
        <p class="text-black text-[14px] font-semibold capitalize w-full flex items-center justify-start">{{logData.missionName || 'No Mission name found'}}</p>
        <span class="w-full flex items-center justify-center">
          <span [ngClass]="{'bg-green-500':logData.state === 'completed', 'bg-yellow-500': logData.state === 'partially', 'bg-red-500':logData.state === 'break'}" class="size-6 rounded-full"></span>
          <!-- state -->
        </span>
      </span>
      <span class="flex items-center justify-between gap-20 w-[80%]">
        <span class="w-full flex items-center justify-around relative">
          <span class="relative messageHover w-full">
            <p class="text-black text-[14px] font-semibold capitalize w-full flex items-center justify-start underline underline-offset-2 duration-300 cursor-pointer messageHover">Message</p>
            <p class="absolute text-[#000000] bg-white font-medium indent-2 leading-7 tracking-wide z-50 w-full left-2 top-[calc(100%+10px)] p-5 rounded-md shadow-[0_0_10px_#00000030] hidden items-center justify-start text-justify hoverMessage">
              {{logData.message}}
            </p>
          </span>
          <p class="text-black text-[14px] font-semibold capitalize w-full flex items-center justify-start">{{logData.startTime}}</p>
        </span>
        <span class="w-[60%] flex items-center justify-between">
          <p class="text-black text-[14px] font-semibold capitalize w-full flex items-center justify-start">{{logData.ranFor}}</p>
          <p class="text-black text-[14px] font-semibold capitalize w-full flex items-center justify-start">{{logData.startedBy}}</p>
        </span>
      </span>
    </span>
   }
   </span>
  </div>

</div>



<div [ngClass]="{'hidden': !missionActionState}" class="absolute flex items-center justify-center w-screen box-border h-screen bg-[#000000] bg-opacity-90 bg-blur top-0 left-0 z-50">\
  <div class="w-[60%] p-10 rounded-[20px] shadow-[0_0_50px_#00000040] bg-[#ffffff] flex flex-col items-center justify-start gap-10">
    <!-- Title and Close Button -->
    <span class="flex items-center justify-between w-full">
      <span class="flex flex-col items-start justify-center">
        <p class="text-[34px] font-bold">Mission Action log</p>
        <p class="flex items-center text-[14px] justify-between gap-2 text-[#7B7B7B] font-medium">
          Can view the mission in progress
          <svg width="20" height="20" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_513_29001)">
            <path d="M12.4987 2.08301C6.75495 2.08301 2.08203 6.75592 2.08203 12.4997C2.08203 18.2434 6.75495 22.9163 12.4987 22.9163C18.2424 22.9163 22.9154 18.2434 22.9154 12.4997C22.9154 6.75592 18.2424 2.08301 12.4987 2.08301ZM13.5404 17.708H11.457V11.458H13.5404V17.708ZM13.5404 9.37467H11.457V7.29134H13.5404V9.37467Z" fill="black"/>
            </g>
            <defs>
            <clipPath id="clip0_513_29001">
            <rect width="25" height="25" fill="white"/>
            </clipPath>
            </defs>
            </svg>
        </p>
      </span>
      <svg (click)="missionActionPopup()" stroke="2" class="cursor-pointer p-1 bg-transparent hover:drop-shadow-lg" width="36" height="35" viewBox="0 0 36 35" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M28.5625 9.00739L26.0551 6.5L17.7812 14.7739L9.50739 6.5L7 9.00739L15.2739 17.2812L7 25.5551L9.50739 28.0625L17.7812 19.7886L26.0551 28.0625L28.5625 25.5551L20.2886 17.2812L28.5625 9.00739Z" fill="#D30000"/>
        </svg>
    </span>
    <!-- Table -->
    <div class="w-full flex items-center justify-center flex-col gap-2">
      <!-- table Title -->
      <span class="w-full h-[50px] text-[12px] text-white font-semibold rounded-[6px] bg-black flex items-center justify-between px-10">
        <span class="flex w-[30%] items-center justify-between pr-[1%]">
          <p class="text-white text-[12px] font-semibold capitalize w-full flex items-center justify-start">Action</p>
          <p class="text-white text-[12px] font-semibold capitalize w-full flex items-center justify-center">State</p>
        </span>
        <span class="flex items-center justify-between gap-20 w-full ">
          <span class="w-full flex items-center justify-around relative">
            <p class="text-white text-[12px] font-semibold capitalize w-full flex items-center justify-start">Message</p>
            <p class="text-white text-[12px] font-semibold capitalize w-full flex items-center justify-center">Start time</p>
          </span>
          <span class="w-[40%] flex items-center justify-end">
            <p class="text-white text-[12px] font-semibold capitalize w-full flex items-center justify-center">Ran for</p>
          </span>
        </span>
      </span>

      <!-- Table rows -->
      <span class="flex h-[250px] flex-col w-full items-start justify-start gap-[3px] overflow-scroll MinimalScrollCSSTwo scroll-smooth scrollCSS pb-3 ">
        @if (selectedUser !== undefined || selectedUser !== "") {
          @for (log of selectedUserLog; track log) {
            <span class="w-full py-4 text-[12px] twoColors text-black font-semibold rounded-[6px] bg-white hover:shadow-[0_0_10px_#00000030] flex items-center justify-between px-10">
              <span class="flex w-[30%] items-center justify-between pr-[1%]">
                <p class="text-black text-[12px] font-semibold capitalize w-full flex items-center justify-start">{{log.action}}</p>
                <span class="text-black text-[12px] font-semibold capitalize w-full flex items-center justify-center">
                  <span [ngClass]="{'bg-green-500':log.state === 'completed', 'bg-yellow-500': log.state === 'partially', 'bg-red-500':log.state === 'break'}" class="size-6 rounded-full"></span>
                </span>
              </span>
              <span class="flex items-center justify-between gap-20 w-full ">
                <span class="w-full flex items-center justify-around relative">
                  <span class="relative messageHover w-full">
                    <p class="text-black text-[14px] font-semibold capitalize w-full flex items-center justify-start underline underline-offset-2 duration-300 cursor-pointer messageHover">Message</p>
                    <p class="absolute text-[#000000] bg-white font-medium indent-2 tracking-wide z-50 w-full left-2 top-[calc(100%+10px)] p-5 rounded-md shadow-[0_0_10px_#00000030] hidden items-center justify-start text-justify hoverMessage">
                      {{log.message}}
                    </p>
                  </span>
                  <p class="text-black text-[14px] font-semibold capitalize w-full flex items-center justify-center">{{log.startTime}}</p>
                </span>
                <span class="w-[40%] flex items-center justify-center">
                  <p class="text-black text-[12px] font-semibold capitalize w-full flex items-center justify-center">{{log.ranFor}}</p>
                </span>
              </span>
            </span>
          }
        }
      </span>

    </div>



  </div>
</div>


